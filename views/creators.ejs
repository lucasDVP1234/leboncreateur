<!-- views/creators.ejs -->
<!DOCTYPE html>
<html lang="fr">
<head>
    <!-- Include your head partial or add necessary meta tags -->
    <title>Choisir ses créateurs - Scalevision</title>
    <!-- Include Montserrat Font and Tailwind CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/tailwind.css">
</head>
<body class="bg-white font-montserrat">
    <%- include('header-login') %>

    <!-- Main Container -->
    <div class="max-w-screen-xl mx-auto px-4 py-6">
        

        
        <!-- Filter Container on Top (removed the aside) -->
        <div class="p-4 rounded mb-2">
            <!-- Form starts here -->
            <form action="/creators" method="GET">
                <!-- Hidden fields to store selected filters -->
                <input type="hidden" name="categories" id="selected-categories" />
                <input type="hidden" name="videoTypes" id="selected-video-types" />
                <input type="hidden" name="countries" id="selected-countries-input" />
                <input type="hidden" name="langues" id="selected-langues-input" />
                <input type="hidden" name="atouts" id="selected-atouts-input" />
                <input type="hidden" name="genres" id="selected-genres-input" />
                <input type="hidden" name="ageMin" id="selected-age-min" />
                <input type="hidden" name="ageMax" id="selected-age-max" />

                <!-- Header with Rechercher and Filtrer button -->
                

                <!-- All Filters in a flexible row -->
                <div id="filters" class="flex flex-wrap gap-6 justify-center">
                    
                    <!-- Genre Filter -->
                    <div>
                        <h3 class="font-semibold mb-2 text-black text-center">Genre</h3>
                        <div class="flex flex-wrap gap-2 justify-center">
                            <% genres.forEach(function(genre) { %>
                                <button 
                                    type="button" 
                                    class="filter-button font-semibold shadow-md px-3 py-1 bg-blue-300 text-black rounded-full hover:text-white hover:bg-black text-sm focus:outline-none"
                                    data-filter="<%= genre %>" 
                                    data-filter-type="Genre"
                                >
                                    <%= genre %>
                                </button>
                            <% }); %>
                        </div>
                    </div>

                    <!-- Caméra Filter -->
                    <div>
                        <h3 class="font-semibold mb-2 text-black text-center">Caméra</h3>
                        <div class="flex flex-wrap gap-2 justify-center">
                            <% categories.forEach(function(category) { %>
                                <button 
                                    type="button" 
                                    class="filter-button font-semibold shadow-md px-3 py-1 bg-green-300 text-black rounded-full hover:text-white hover:bg-black text-sm focus:outline-none"
                                    data-filter="<%= category %>" 
                                    data-filter-type="Category"
                                >
                                    <%= category %>
                                </button>
                            <% }); %>
                        </div>
                    </div>
                    
                    <!-- Type de vidéo Filter -->
                    <div>
                        <h3 class="font-semibold mb-2 text-black text-center">Type de vidéo</h3>
                        <div class="flex flex-wrap gap-2 justify-center">
                            <% videoTypes.forEach(function(type) { %>
                                <button 
                                    type="button" 
                                    class="filter-button font-semibold shadow-md px-3 py-1 bg-orange-300 text-black rounded-full text-sm hover:text-white hover:bg-black focus:outline-none"
                                    data-filter="<%= type %>" 
                                    data-filter-type="Type of Videos"
                                >
                                    <%= type %>
                                </button>
                            <% }); %>
                        </div>
                    </div>

                    <!-- Age Selector -->
                    <div>
                        <h3 class="font-semibold mb-2 text-black text-center">Age</h3>
                        <div class="flex items-center space-x-2 justify-center">
                            <input 
                                type="number" 
                                name="ageMin2" 
                                id="age-min" 
                                class="w-20 px-2 py-1 border rounded" 
                                placeholder="Min" 
                                min="0" 
                                max="100" 
                                value="0"
                            />
                            <span>-</span>
                            <input 
                                type="number" 
                                name="ageMax2" 
                                id="age-max" 
                                class="w-20 px-2 py-1 border rounded" 
                                placeholder="Max" 
                                min="0" 
                                max="99" 
                                value="99"
                            />
                        </div>
                    </div>

                    <!-- Pays Filter -->
                    <div>
                        <h3 class="font-semibold text-black mb-2 text-center">Pays</h3>
                        <div class="flex flex-wrap gap-2 justify-center">
                            <% countries.forEach(function(country) { %>
                                <button 
                                    type="button" 
                                    class="filter-button font-semibold shadow-md px-3 py-1 bg-yellow-300 text-black rounded-full hover:text-white hover:bg-black text-sm focus:outline-none"
                                    data-filter="<%= country %>" 
                                    data-filter-type="Country"
                                >
                                    <%= country %>
                                </button>
                            <% }); %>
                        </div>
                    </div>

                    <!-- Langue Filter -->
                    <div>
                        <h3 class="font-semibold text-black mb-2 text-center">Langue</h3>
                        <div class="flex flex-wrap gap-2 justify-center">
                            <% langues.forEach(function(langue) { %>
                                <button 
                                    type="button" 
                                    class="filter-button font-semibold shadow-md px-3 py-1 bg-red-300 text-black rounded-full hover:text-white hover:bg-black text-sm focus:outline-none"
                                    data-filter="<%= langue %>" 
                                    data-filter-type="Langue"
                                >
                                    <%= langue %>
                                </button>
                            <% }); %>
                        </div>
                    </div>

                    <!-- Spécial Filter -->
                    <div>
                        <h3 class="font-semibold text-black mb-2 text-center">Spécial</h3>
                        <div class="flex flex-wrap gap-2 justify-center">
                            <% atouts.forEach(function(atout) { %>
                                <button 
                                    type="button" 
                                    class="filter-button font-semibold shadow-md px-3 py-1 bg-gray-300 text-black rounded-full hover:text-white hover:bg-black text-sm focus:outline-none"
                                    data-filter="<%= atout %>" 
                                    data-filter-type="Atout"
                                >
                                    <%= atout %>
                                </button>
                            <% }); %>
                        </div>
                    </div>
                    

                    <!-- Besoin Particulier -->
                    
                </div>
                <div class="flex justify-center mt-8 mb-4">
                    <button 
                      type="submit" 
                      class="rounded-full shadow bg-orange-500 hover:bg-blue-800 
                             text-white font-semibold px-6 py-2"
                    >
                      Filtrer
                    </button>
                </div>
                
            </form>
            
            <!-- Form ends here -->
        </div>

        <!-- Main Content -->
        <main>
            <!-- Removed the sticky top bar and selected-filters-container -->

            <h1 class="relative text-l text-black font-semibold mb-4">
                <span class="relative inline-block px-4 py-1 mr-2">
                    <span class="absolute inset-0 bg-orange-500 rounded-lg transform -rotate-2 z-0 drop-shadow-lg"></span>
                    <span class="relative font-semibold text-l text-white z-10">
                        100% Gratuit
                    </span>
                </span>
                Contacter vos créateurs préférés !
            </h1>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3">
                <% creators.forEach(function(creator) { %>
                    <div 
                        class="creator-card transform hover:scale-103 hover:rotate-1 bg-gray-50 hover:bg-gray-50 rounded-lg shadow-[0_0_5px_rgba(0,0,0,0.3)] overflow-hidden relative" 
                        data-creator-id="<%= creator._id %>"
                    >
                        <!-- Creator Image -->
                        <a href="/creators/<%= creator._id %>"> 
                            <img 
                                src="<%= creator.portfolioImages %>" 
                                alt="<%= creator.name %>" 
                                class="w-full h-48 object-cover"
                            >
                        </a>
                
                        <!-- Portfolio Bubbles -->
                        <div class="flex justify-center -mt-8">
                            <div class="bg-white p-1 rounded-full mx-1 shadow-lg">
                                <img
                                    src="<%= creator.profileImage %>"
                                    alt="Portfolio Image"
                                    class="h-16 w-16 rounded-full object-cover portfolio-image"
                                    data-image-url="<%= creator.profileImage %>"
                                    tabindex="0"
                                    loading="lazy"
                                >
                            </div>
                        </div>
                
                        <!-- Creator Info -->
                        <div class="p-2 -mt-8">
                            <!-- Creator Name and Add to Basket Button -->
                            <div class="flex items-center justify-between mb-2">
                                <!-- Creator Name -->
                                <h3 class="text-lg font-semibold text-black">
                                    <%= creator.name %>
                                </h3>
                            
                                <!-- Add to Basket Button -->
                                <form action="/add-to-campaign" method="POST">
                                    <input type="hidden" name="creatorId" value="<%= creator._id %>">
                                    <button 
                                        type="submit" 
                                        class="flex items-center text-sm px-2 py-1 font-medium transition duration-200 text-black focus:outline-none"
                                    >
                                        <img 
                                            src="/images/coeurvide.png" 
                                            alt="Ajouter au panier" 
                                            class="w-6 h-6"
                                        >
                                    </button>
                                </form>
                            </div>
                            
                            <!-- Creator Age -->
                            <p class="flex flex-wrap items-center mb-2 text-gray-600 text-sm">
                                <img src="/images/11.png" alt="Âge" class="w-5 h-5 mr-2">
                                <%= creator.age %> ans
                            </p>
                    
                            <!-- Creator Country -->
                            <div class="flex flex-wrap items-center gap-2 mb-2">
                                <img src="/images/mondeblue.png" alt="Âge" class="w-5 h-5 mt-1">
                                <span class="px-2 py-1 bg-blue-100 text-blue-500 text-xs rounded-full">
                                    <%= creator.country %>
                                </span>
                            </div>
                    
                            <!-- Video Types and 'Voir' Button -->
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex flex-wrap gap-2">
                                    <img src="/images/camvert.png" alt="Âge" class="w-5 h-5 mt-1">
                                    <% creator.videoTypes.forEach(function(type) { %>
                                        <span class="px-2 py-1 bg-green-100 text-green-500 text-xs rounded-full">
                                            <%= type %>
                                        </span>
                                    <% }); %>
                                </div>
                            
                                <div class="flex">
                                    <a 
                                        href="/creators/<%= creator._id %>" 
                                        class="flex-inline bg-white shadow-md hover:bg-orange-500 text-black hover:text-white font-bold py-1 px-4 rounded"
                                    >
                                        Voir
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                <% }); %>
            </div>
        </main>
    </div>
    

    <script src="js/filters.js"></script>
    <!-- Meta Pixel Code -->
    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '1741637636344764');
        fbq('track', 'PagKreatorsConversion');
    </script>
    

    <noscript>
        <img height="1" width="1" style="display:none"
        src="https://www.facebook.com/tr?id=1741637636344764&ev=PageView&noscript=1"
        />
    </noscript>

    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script src="/js/app.js"></script> 
    
    <!-- End Meta Pixel Code -->
</body>
</html>
